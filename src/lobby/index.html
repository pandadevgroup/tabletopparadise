<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Tabletop Paradise</title>
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">

    <!-- <script defer src="/assets/fontawesome/js/fa-brands.min.js"></script> -->
    <!-- <script defer src="/assets/fontawesome/js/fa-light.min.js"></script> -->
    <!-- <script defer src="/assets/fontawesome/js/fa-regular.min.js"></script> -->
    <script defer src="/assets/fontawesome/js/fa-solid.min.js"></script>
    <script src="/assets/fontawesome/js/fontawesome.min.js"></script>
    <style>
        /* Must be placed here instead of external stylesheet because external stylesheet loads with js, after html, giving a FOUC(flash of unstyled content) */

        .hidden {
            display: none;
        }
        .loading {
            padding:20px;
        }
    </style>
</head>

<body>
    <div id="loading">
        <p>Loading...</p>
    </div>
    <div class="container hidden" id="main">
        <div class="col-lg-12">
            <h1 class="pt-4">Tabletop Paradise - Lobby</h1>
            <p>
                <b>Hearts</b>#
                <span class="game-id">a7bj</span>
            </p>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Invite Players:</span>
                </div>
                <input type="text" class="form-control" value="https://tabletopparadise.pandadevgroup.com/join/a7bj" readonly id="invite-url">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary clip" data-clipboard-target="#invite-url">
                        <img height="25" src="https://cdn.jeffkmeng.com/clipboardjs/2.0.0/clippy.svg" alt="copy to clipboard" title="copy to clipboard">
                    </button>
                </div>
                <div class="input-group-append">
                    <a class="btn btn-outline-secondary" href="mailto:?subject=Join my Tabletop Paradise game!&body=https" id="invite-email-link">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>

			<hr>

			<!--<div class="inGame"> - use dropdown that comes from clicking on the first user
				<button class="btn btn-danger">Leave Game</button>
			</div>

			<div class="notInGame">
				<button class="btn btn-success">Join Game</button>
			</div>-->

			<div class="isHost">
                <button class="btn btn-block btn-success">Start Game</button>
                <hr>
			</div>

            <div id="player-list">
                <!-- NOTE: custom css is used to add the classes no-caret on dropdown and btn-group-justified on button groups-->
                <b>Players:</b>
                <div class="btn-group btn-group-justified" role="group" aria-label="Button group with nested dropdown" id="playerList">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-secondary disabled" id="p1btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Searching
                            <span class="loading-animation">...</span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="p1btn">
                            <a class="dropdown-item" href="#" id="leave-game">Leave game</a>


                        </div>
                    </div>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-secondary disabled" id="p2btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Searching
                            <span class="loading-animation">...</span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="p2btn">
                            <a class="dropdown-item" href="#">Whisper</a>
                            <a class="dropdown-item" href="#">View profile</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="#">Promote to host</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="#">Report</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="#">Remove from game</a>
                        </div>
                    </div>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-secondary disabled" id="p3btn">
                            Searching
                            <span class="loading-animation">...</span>
                        </button>

                    </div>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-secondary disabled" id="p4btn">
                            Searching
                            <span class="loading-animation">...</span>
                        </button>

                    </div>


                </div>
            </div>
            <hr>

            <div id="chat">

                <div id="chat-messages">
                    <p class="message site-message text-muted" id="chat-no-messages-yet">No messages yet. Be the first!</p>
                </div>

                <div class="input-group my-3">

                    <input type="text" class="form-control" placeholder="Chat..." id="chat-msg">
                    <div class="input-group-append">
                        <button class="btn btn-primary" id="chat-send">
                            Send
                        </button>
                    </div>
                </div>
            </div>
            <hr>
            <p>
                <a data-toggle="collapse" href="#rules" aria-expanded="false" aria-controls="rules">
                    How to play hearts
                </a>

            </p>
            <div class="collapse mb-4" id="rules">
                <div class="card card-body">
                    <div class="" id="rules-content">
                        <h5>Intro</h5>
                        Many trick-taking games are not directly related to Bridge or Whist. Perhaps the foremost one is Hearts, which is truly one
                        of the greatest card games ever devised for four players, each playing individually.

                        <h5>The Deck</h5>

                        <p>The standard 52-card deck is used.</p>

                        <h5>Object of the game</h5>
                        <p>To be the player with the lowest score at the end of the game. When one player hits the agreed-upon
                            score or higher, the game ends; and the player with the lowest score wins.
                        </p>
                        <h5>Scoring</h5>
                        <p>
                            At the end of each hand, players count the number of hearts they have taken as well as the queen of spades, if applicable.
                            Hearts count as one point each and the queen counts 13 points.
                            <br>Each heart - 1 point
                            <br>The Queen of spades - 13 points
                            <br>The aggregate total of all scores for each hand must be a multiple of 26.
                            <br>The game is usually played to 100 points (some play to 50).
                            <br>When a player takes all 13 hearts and the queen of spades in one hand, instead of losing 26 points,
                            that player scores zero and each of his opponents score an additional 26 points.
                        </p>
                        <h5>Dealing</h5>
                        Deal the cards one at a time, face down, clockwise. In a four-player game, each is dealt 13 cards; in a three-player game,
                        the 2 of diamonds should be removed, and each player gets 17 cards; in a five-player game, the 2
                        of diamonds and 2 of clubs should be removed so that each player will get 10 cards.

                        <h5>Play</h5>
                        <p>
                            The player holding the 2 of clubs after the pass makes the opening lead. If the 2 has been removed for the three handed game,
                            then the 3 of clubs is led.
                            <br> Each player must follow suit if possible. If a player is void of the suit led, a card of any
                            other suit may be discarded. However, if a player has no clubs when the first trick is led, a
                            heart or the queen of spades cannot be discarded. The highest card of the suit led wins a trick
                            and the winner of that trick leads next. There is no trump suit.
                            <br> The winner of the trick collects it and places it face down. Hearts may not be led until a heart
                            or the queen of spades has been discarded. The queen does not have to be discarded at the first
                            opportunity.
                            <br> The queen can be led at any time.</p>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jeffkmeng.com/clipboardjs/2.0.0/clipboard.min.js"></script>
    <script>
        var clip = new ClipboardJS(".clip");
        var animationStage = 3;//represents the current number of dots;
        var loadingText;
        var loadingInterval = setInterval(function () {
            loadingText = "";
            for (var i = 0; i < 4; i++) {
                if (i < animationStage) {
                    loadingText += ".";
                } else {
                    loadingText += "&nbsp;";
                }
            }
            $(".loading-animation").html(loadingText);
            animationStage++;
            animationStage = animationStage > 3 ? 0 : animationStage;
        }, 300);
        $(document).ready(function () {
            $("#chat-messages").scrollTop($('#chat-messages')[0].scrollHeight);

        });

    </script>
    <script src="/lobby.js"></script>

</body>

</html>
